{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/riandasilva/vetreria/src/components/VetreriaBox.bak.js\",\n    _s = $RefreshSig$();\n\nvar THREE = require(\"three\");\n\nglobal.THREE = THREE;\nimport React, { Suspense, useRef, useState, useEffect } from \"react\";\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from '@react-three/drei';\nimport { proxy, useProxy } from \"valtio\";\nimport { State } from \"./State\";\nimport { GlassMaterial } from './Materials';\n\nfunction scaleY(mesh, scale) {\n  mesh.scale.y = scale;\n  if (!mesh.geometry.boundingBox) mesh.geometry.computeBoundingBox();\n  var height = mesh.geometry.boundingBox.max.y - mesh.geometry.boundingBox.min.y; //height is here the native height of the geometry\n  //that does not change with scaling. \n  //So we need to multiply with scale again\n\n  mesh.position.y = height * scale / 2;\n}\n/*function getWorldPosition(obj)\n{\n    \n    var vec= new THREE.Vector3();\n    vec.setFromMatrixPosition(obj.matrixWorld);\n    return (vec.x, vec.y, vec.z); // Like this?\n}*/\n\n/*THREE.Object3D.prototype.updateMatrix = function () {\n\n\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\tif ( this.pivot && this.pivot.isVector3 ) {\n\n\t\tvar px = this.pivot.x;\n\t\tvar py = this.pivot.y;\n\t\tvar pz = this.pivot.z;\n\n\t\tvar te = this.matrix.elements;\n\n\t\tte[ 12 ] += px - te[ 0 ] * px - te[ 4 ] * py - te[ 8 ] * pz;\n\t\tte[ 13 ] += py - te[ 1 ] * px - te[ 5 ] * py - te[ 9 ] * pz;\n\t\tte[ 14 ] += pz - te[ 2 ] * px - te[ 6 ] * py - te[ 10 ] * pz;\n\n\t}\n\n\tthis.matrixWorldNeedsUpdate = true;\n\n};*/\n\n/*function originToLeft( geometry ) {\n\n  //1. Find the lowest `y` coordinate\n  var shift = geometry.boundingBox ? geometry.boundingBox.min.x : geometry.computeBoundingBox().min.x;\n\n  //2. Then you translate all your vertices up \n  //so the vertical origin is the bottom of the feet :\n  for ( var i = 0 ; i < geometry.vertices.length ; i++ ) {\n      geometry.vertices[ i ].x -= shift;\n  }\n  //or as threejs implements (WestLangley's answer) : \n  geometry.translate( 0, -shift, 0);\n\n  //finally\n  geometry.verticesNeedUpdate = true;\n}*/\n\n\nfunction Vetreria(_ref) {\n  _s();\n\n  var x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      x2 = _ref.x2;\n  var panelm = useRef();\n  var doorm = useRef();\n  var cerniere = useRef();\n  var frame = useRef();\n  var pomello = useRef();\n  var walldoor = useRef();\n  var pomelloin = useRef(); //originToLeft(doorm);\n  // Drei's useGLTF hook sets up draco automatically, that's how it differs from useLoader(GLTFLoader, url)\n  // { nodes, materials } are extras that come from useLoader, these do not exist in threejs/GLTFLoader\n  // nodes is a named collection of meshes, materials a named collection of materials\n\n  var _useGLTF = useGLTF(\"br2.gltf\"),\n      nodes = _useGLTF.nodes,\n      materials = _useGLTF.materials;\n\n  var offset = x - 1;\n  var vec = new THREE.Vector3(x, y, z);\n  var vec2 = new THREE.Vector3(x, y, x2);\n  var vec3 = new THREE.Vector3(x * 1.35, -0.01, x2 * 0.97);\n  var vec4 = new THREE.Vector3(x, y, z);\n  var panelmP = new THREE.Vector3(x * 1.35, -0.01, 0.97);\n  var pomelloP = new THREE.Vector3(1.35 * x, -0.01, 0.97); //  -(x1 * offset) - (size*scale)/2) -(size/2)\n\n  var frameS = new THREE.Vector3(x * 1.35, -0.01, 0.97);\n  var cerniereP = new THREE.Vector3(1.35, y * -0.01, 0.97);\n  var vecM = new THREE.Vector3(1, 1, 1); //nodes.panelm.pivot = new THREE.Vector3( 1, 5, 5 );\n\n  var radian = 2 * Math.PI * (180 / 360); // mesh.geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - mesh.geometry.parameters.height / 2, 0 ) ); \n  // mesh.translateY(mesh.geometry.parameters.height / 2);\n\n  /*\n  var boundingBox = nodes.pomello.geometry.boundingBox; \n  \n  var position = new THREE.Vector3();\n  position.subVectors( boundingBox.max, boundingBox.min );\n  position.multiplyScalar( 0.5 );\n  position.add( boundingBox.min );\n  \n  position.applyMatrix4( nodes.pomello.matrixWorld );\n  \n  console.log(position.x + ',' + position.y + ',' + position.z);\n  */\n  // Using the GLTFJSX output here to wire in app-state and hook up events\n\n  /*if (myPos.x > blockPos.x)\n    {\n        zDistance = myPos.x - blockPos.x;\n  \n        block.position += Vector3.forward * zDistance / 2;\n  \n        let newposm = new THREE.Vector3(1, 0.1, block.x + zDistance);\n    }*/\n  //geometry.translate( 0, 0.5, 0 );\n\n  useFrame(function () {\n    //scaleY(panelm.current, y)\n    panelm.current.scale.lerp(vec, 0.1);\n    panelm.current.position.lerp(panelmP, 0.1);\n    doorm.current.scale.lerp(vec, 0.1);\n    walldoor.current.scale.lerp(vec, 0.1);\n    frame.current.scale.lerp(vec, 0.1);\n    frame.current.position.lerp(frameS, 0.1);\n    pomello.current.position.lerp(pomelloP, 0.1);\n    pomello.current.scale.lerp(vec, 0.1);\n    cerniere.current.position.lerp(cerniereP, 0.1);\n    panelm.current.scale.lerp(vec2, 0.1);\n    panelm.current.position.lerp(vec3, 0.1); //var myPos = walldoor.position;\n    //var block = spawnedBlocks[spawnedBlocks.Count - 1].transform;\n    //var blockPos = doorm.position;\n  });\n  /*<group ref={panelm} position={[1.35, -0.01, 0.97]}>\n          <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} />\n         <mesh ref={doorm} geometry={nodes.doorm.geometry} material={GlassMaterial}  />\n         <mesh ref={panelm} geometry={nodes.doorm.geometry} material={GlassMaterial} rotation={[0, -Math.PI / 2, 0]} position={[1.35, -0.01, 0.97]} />\n       </group>\n       \n       \n       <group rotation={[0, -radian, 0]} position={[1.28, 0, -0.4]} >\n        <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} />\n        <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} position={[1.35, -0.01, 0.97]} />\n        </group>\n       */\n\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    dispose: null,\n    children: [/*#__PURE__*/_jsxDEV(\"group\", {\n      position: [-1.35, 0.01, -0.97],\n      children: [/*#__PURE__*/_jsxDEV(\"mesh\", {\n        ref: doorm,\n        geometry: nodes.doorm.geometry,\n        material: GlassMaterial\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n        ref: cerniere,\n        geometry: nodes.cerniere.geometry,\n        material: nodes.cerniere.material,\n        position: [1.35, -0.01, 0.97]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n        ref: frame,\n        geometry: nodes.frame.geometry,\n        material: nodes.frame.material,\n        position: [1.35, -0.01, 0.97]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n        ref: panelm,\n        geometry: nodes.panelm.geometry,\n        material: GlassMaterial,\n        position: [1.35, -0.01, 0.97]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"group\", {\n        ref: pomello,\n        position: [1.35, -0.01, 0.97],\n        children: /*#__PURE__*/_jsxDEV(\"mesh\", {\n          ref: pomelloin,\n          geometry: nodes.pomello.geometry,\n          material: nodes.pomello.material,\n          scale: [1, 1, 1]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n        ref: walldoor,\n        geometry: nodes.walldoor.geometry,\n        material: materials['Material.001']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      geometry: nodes.wall.geometry,\n      material: materials.walls,\n      scale: [1.88, 1.29, 1.88]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      geometry: nodes.floor.geometry,\n      material: materials.floor,\n      scale: [1.88, 1.29, 1.88]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Vetreria, \"bjYU70rDX9BO3MGu6qxymMBhXas=\", false, function () {\n  return [useGLTF, useFrame];\n});\n\n_c = Vetreria;\nexport default function VetreriaBox(_ref2) {\n  var x = _ref2.x,\n      y = _ref2.y,\n      z = _ref2.z,\n      x2 = _ref2.x2;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Canvas, {\n      concurrent: true,\n      pixelRatio: [1, 1.5],\n      camera: {\n        position: [1.5, 1.5, 3.95],\n        fov: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n        intensity: 0.3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"spotLight\", {\n        intensity: 0.3,\n        angle: 0.1,\n        penumbra: 1,\n        position: [5, 25, 20]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: null,\n        children: [/*#__PURE__*/_jsxDEV(Vetreria, {\n          x: x,\n          y: y,\n          z: z,\n          x2: x2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Environment, {\n          preset: \"apartment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ContactShadows, {\n          \"rotation-x\": Math.PI / 2,\n          position: [0, -0.8, 0],\n          opacity: 0.25,\n          width: 10,\n          height: 10,\n          blur: 2,\n          far: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n        minDistance: .5,\n        maxDistance: 5,\n        minAzimuthAngle: 0.1,\n        maxAzimuthAngle: Math.PI / 2 - 0.05,\n        maxPolarAngle: Math.PI / 2 - 0.05,\n        minPolarAngle: 0.98,\n        target: [-0.5, 1.45, 0],\n        enableZoom: true,\n        enablePan: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n_c2 = VetreriaBox;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Vetreria\");\n$RefreshReg$(_c2, \"VetreriaBox\");","map":{"version":3,"sources":["/Users/riandasilva/vetreria/src/components/VetreriaBox.bak.js"],"names":["THREE","require","global","React","Suspense","useRef","useState","useEffect","Canvas","useFrame","ContactShadows","Environment","useGLTF","OrbitControls","proxy","useProxy","State","GlassMaterial","scaleY","mesh","scale","y","geometry","boundingBox","computeBoundingBox","height","max","min","position","Vetreria","x","z","x2","panelm","doorm","cerniere","frame","pomello","walldoor","pomelloin","nodes","materials","offset","vec","Vector3","vec2","vec3","vec4","panelmP","pomelloP","frameS","cerniereP","vecM","radian","Math","PI","current","lerp","material","wall","walls","floor","VetreriaBox","fov"],"mappings":"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","sourcesContent":["const THREE = require(\"three\");\nglobal.THREE = THREE;\nimport React, { Suspense, useRef, useState, useEffect } from \"react\"\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from '@react-three/drei'\nimport { proxy, useProxy } from \"valtio\"\nimport {State} from \"./State\"\nimport {GlassMaterial} from './Materials'\n\n\nfunction scaleY ( mesh, scale ) {\n  mesh.scale.y = scale ;\n  if( ! mesh.geometry.boundingBox ) mesh.geometry.computeBoundingBox();\n  var height = mesh.geometry.boundingBox.max.y - mesh.geometry.boundingBox.min.y;\n\n  //height is here the native height of the geometry\n  //that does not change with scaling. \n  //So we need to multiply with scale again\n  mesh.position.y = height * scale / 2 ;\n}\n\n/*function getWorldPosition(obj)\n{\n    \n    var vec= new THREE.Vector3();\n    vec.setFromMatrixPosition(obj.matrixWorld);\n    return (vec.x, vec.y, vec.z); // Like this?\n}*/\n\n/*THREE.Object3D.prototype.updateMatrix = function () {\n\n\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\tif ( this.pivot && this.pivot.isVector3 ) {\n\n\t\tvar px = this.pivot.x;\n\t\tvar py = this.pivot.y;\n\t\tvar pz = this.pivot.z;\n\n\t\tvar te = this.matrix.elements;\n\n\t\tte[ 12 ] += px - te[ 0 ] * px - te[ 4 ] * py - te[ 8 ] * pz;\n\t\tte[ 13 ] += py - te[ 1 ] * px - te[ 5 ] * py - te[ 9 ] * pz;\n\t\tte[ 14 ] += pz - te[ 2 ] * px - te[ 6 ] * py - te[ 10 ] * pz;\n\n\t}\n\n\tthis.matrixWorldNeedsUpdate = true;\n\n};*/\n\n/*function originToLeft( geometry ) {\n\n  //1. Find the lowest `y` coordinate\n  var shift = geometry.boundingBox ? geometry.boundingBox.min.x : geometry.computeBoundingBox().min.x;\n\n  //2. Then you translate all your vertices up \n  //so the vertical origin is the bottom of the feet :\n  for ( var i = 0 ; i < geometry.vertices.length ; i++ ) {\n      geometry.vertices[ i ].x -= shift;\n  }\n  //or as threejs implements (WestLangley's answer) : \n  geometry.translate( 0, -shift, 0);\n\n  //finally\n  geometry.verticesNeedUpdate = true;\n}*/\n\nfunction Vetreria({ x, y, z, x2 }) {\n\nconst panelm = useRef()\nconst doorm = useRef()\nconst cerniere = useRef()\nconst frame = useRef()\nconst pomello = useRef()\nconst walldoor = useRef()\nconst pomelloin = useRef()\n\n//originToLeft(doorm);\n\n\n\n\n// Drei's useGLTF hook sets up draco automatically, that's how it differs from useLoader(GLTFLoader, url)\n// { nodes, materials } are extras that come from useLoader, these do not exist in threejs/GLTFLoader\n// nodes is a named collection of meshes, materials a named collection of materials\nconst { nodes, materials } = useGLTF(\"br2.gltf\")\n\nconst offset = x - 1;\n\nconst vec = new THREE.Vector3(x, y, z);\n\nconst vec2 = new THREE.Vector3(x, y, x2);\n\nconst vec3 = new THREE.Vector3(x * 1.35, -0.01, x2 * 0.97);\n\nconst vec4 = new THREE.Vector3(x, y, z);\n\nconst panelmP = new THREE.Vector3(x * 1.35, -0.01, 0.97);\n\nconst pomelloP = new THREE.Vector3((1.35 * x) , -0.01, 0.97); //  -(x1 * offset) - (size*scale)/2) -(size/2)\n\nconst frameS = new THREE.Vector3(x * 1.35, -0.01, 0.97);\n\nconst cerniereP = new THREE.Vector3(1.35, y * -0.01, 0.97);\n\nconst vecM = new THREE.Vector3(1, 1, 1);\n\n//nodes.panelm.pivot = new THREE.Vector3( 1, 5, 5 );\nlet radian = 2 * Math.PI * (180 / 360);\n\n // mesh.geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - mesh.geometry.parameters.height / 2, 0 ) ); \n  // mesh.translateY(mesh.geometry.parameters.height / 2);\n\n\n/*\nvar boundingBox = nodes.pomello.geometry.boundingBox; \n\nvar position = new THREE.Vector3();\nposition.subVectors( boundingBox.max, boundingBox.min );\nposition.multiplyScalar( 0.5 );\nposition.add( boundingBox.min );\n\nposition.applyMatrix4( nodes.pomello.matrixWorld );\n\nconsole.log(position.x + ',' + position.y + ',' + position.z);\n*/\n\n// Using the GLTFJSX output here to wire in app-state and hook up events\n\n/*if (myPos.x > blockPos.x)\n  {\n      zDistance = myPos.x - blockPos.x;\n\n      block.position += Vector3.forward * zDistance / 2;\n\n      let newposm = new THREE.Vector3(1, 0.1, block.x + zDistance);\n  }*/\n\n  //geometry.translate( 0, 0.5, 0 );\n\nuseFrame(() => {\n\n  //scaleY(panelm.current, y)\n  \n  panelm.current.scale.lerp(vec, 0.1)\n  panelm.current.position.lerp(panelmP, 0.1)\n\n  doorm.current.scale.lerp(vec, 0.1)\n  walldoor.current.scale.lerp(vec, 0.1)\n  frame.current.scale.lerp(vec, 0.1)\n  frame.current.position.lerp(frameS, 0.1)\n  \n  pomello.current.position.lerp(pomelloP, 0.1)\n  pomello.current.scale.lerp(vec, 0.1)\n  cerniere.current.position.lerp(cerniereP, 0.1)\n\n  panelm.current.scale.lerp(vec2, 0.1)\n  panelm.current.position.lerp(vec3, 0.1)\n\n  //var myPos = walldoor.position;\n  //var block = spawnedBlocks[spawnedBlocks.Count - 1].transform;\n  //var blockPos = doorm.position;\n\n  \n\n  \n  \n\n})\n\n/*<group ref={panelm} position={[1.35, -0.01, 0.97]}>\n        <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} />\n       <mesh ref={doorm} geometry={nodes.doorm.geometry} material={GlassMaterial}  />\n       <mesh ref={panelm} geometry={nodes.doorm.geometry} material={GlassMaterial} rotation={[0, -Math.PI / 2, 0]} position={[1.35, -0.01, 0.97]} />\n     </group>\n     \n     \n     <group rotation={[0, -radian, 0]} position={[1.28, 0, -0.4]} >\n      <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} />\n      <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} position={[1.35, -0.01, 0.97]} />\n      </group>\n     */\n\n     \nreturn (\n  <group\n    dispose={null} >\n      <group position={[-1.35, 0.01, -0.97]}>\n      <mesh ref={doorm} geometry={nodes.doorm.geometry} material={GlassMaterial}  />\n      \n      <mesh ref={cerniere} geometry={nodes.cerniere.geometry} material={nodes.cerniere.material} position={[1.35, -0.01, 0.97]} />\n      <mesh ref={frame} geometry={nodes.frame.geometry} material={nodes.frame.material} position={[1.35, -0.01, 0.97]} />\n      \n      <mesh ref={panelm} geometry={nodes.panelm.geometry} material={GlassMaterial} position={[1.35, -0.01, 0.97]} />\n      \n\n      <group ref={pomello} position={[1.35, -0.01, 0.97]}>\n        <mesh ref={pomelloin} geometry={nodes.pomello.geometry} material={nodes.pomello.material} scale={[1,1,1]} />\n      </group>\n      <mesh ref={walldoor} geometry={nodes.walldoor.geometry} material={materials['Material.001']} />\n    </group>\n    <mesh geometry={nodes.wall.geometry} material={materials.walls} scale={[1.88, 1.29, 1.88]} />\n    <mesh geometry={nodes.floor.geometry} material={materials.floor} scale={[1.88, 1.29, 1.88]} />\n  </group>\n)\n}\n\nexport default function VetreriaBox({ x, y, z, x2 }) {\nreturn (\n  <>\n    <Canvas concurrent pixelRatio={[1, 1.5]} camera={{ position: [1.5, 1.5, 3.95], fov:30 }}>\n      <ambientLight intensity={0.3} />\n      <spotLight intensity={0.3} angle={0.1} penumbra={1} position={[5, 25, 20]} />\n      <Suspense fallback={null}>\n        <Vetreria x={x} y={y} z={z} x2={x2}  />\n        <Environment preset=\"apartment\" />\n        <ContactShadows rotation-x={Math.PI / 2} position={[0, -0.8, 0]} opacity={0.25} width={10} height={10} blur={2} far={1} />\n      </Suspense>\n      <OrbitControls minDistance={.5} maxDistance={5} minAzimuthAngle={0.1} maxAzimuthAngle={Math.PI / 2-0.05} maxPolarAngle={Math.PI / 2-0.05} minPolarAngle={0.98}  target={[-0.5,1.45,0]}  enableZoom={true} enablePan={true} />\n    </Canvas>\n  </>\n)\n}"]},"metadata":{},"sourceType":"module"}